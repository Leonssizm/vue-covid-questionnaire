<template>
  <label for="name" class="block text-xl font-bold mb-3 leading-7">áƒ áƒáƒ¡ áƒ”áƒšáƒáƒ“áƒ”áƒ‘áƒ˜?*</label>
  <div class="flex flex-col ml-6">
    <div class="flex">
      <Field
        type="radio"
        name="vaccination-refusal"
        value="registered_and_waiting"
        rules="required"
        class="mr-2 w-5 accent-black"
        @click="
          () => {
            showPopupModal = false
            updatePopupContent('none')
          }
        "
        @input="$emit('update:modelValue', $event.target.value)"
        v-model="initialValue"
      />
      <span class="ml-4 leading-7">áƒ“áƒáƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ•áƒáƒ  áƒ“áƒ áƒ•áƒ”áƒšáƒáƒ“áƒ”áƒ‘áƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ¡</span>
    </div>
    <div class="flex mt-2">
      <Field
        type="radio"
        name="vaccination-refusal"
        value="not_planning"
        rules="required"
        class="mr-2 w-5 accent-black"
        @click="
          () => {
            showPopupModal = true
            updatePopupContent('not_planning')
          }
        "
        @input="$emit('update:modelValue', $event.target.value)"
        v-model="initialValue"
      />
      <span class="ml-4 leading-7">áƒáƒ  áƒ•áƒ’áƒ”áƒ’áƒ›áƒáƒ•</span>
    </div>
    <div class="flex mt-2">
      <Field
        type="radio"
        name="vaccination-refusal"
        value="had_covid_and_planning_to_be_vaccinated"
        rules="required"
        class="mr-2 w-5 accent-black"
        @click="
          () => {
            showPopupModal = true
            updatePopupContent('had_covid_and_planning_to_be_vaccinated')
          }
        "
        @input="$emit('update:modelValue', $event.target.value)"
        v-model="initialValue"
      />
      <span class="ml-4 leading-7">áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒšáƒ˜ áƒ›áƒáƒ¥áƒ•áƒ¡ áƒ“áƒ áƒ•áƒ’áƒ”áƒ’áƒ›áƒáƒ• áƒáƒªáƒ áƒáƒ¡</span>
    </div>
  </div>
  <!-- popup -->
  <div class="mt-11 ml-10" v-if="showPopupModal">
    <span v-html="popupContent" class="font-arial font-normal"></span>
  </div>
</template>
<script setup>
import { Field } from 'vee-validate'
import { ref, inject } from 'vue'

let showPopupModal = ref(false)
let popupContent = ref('')

let initialValue = inject('vaccinationRefusalQuestion')

defineProps({
  modelValue: {
    type: String,
    required: true
  }
})
defineEmits(['update:modelValue'])

function updatePopupContent(element) {
  if (element === 'not_planning') {
    popupContent.value =
      'ğŸ‘‰ <a class="text-[#1289AE]" href="https://booking.moh.gov.ge/">https://booking.moh.gov.ge/</a>'
  } else if (element === 'had_covid_and_planning_to_be_vaccinated') {
    popupContent.value =
      'áƒáƒ®áƒáƒšáƒ˜ áƒáƒ áƒáƒ¢áƒáƒ™áƒáƒšáƒ˜áƒ— áƒ™áƒáƒ•áƒ˜áƒ“áƒ˜áƒ¡ áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒ“áƒáƒœ 1 <br/> áƒ—áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ¨áƒ”áƒ’áƒ˜áƒ«áƒšáƒ˜áƒáƒ— áƒ•áƒáƒ¥áƒªáƒ˜áƒœáƒ˜áƒ¡ áƒ’áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ. <hr class="mt-3"> ğŸ‘‰ áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ‘áƒ›áƒ£áƒšáƒ˜ <br/> <a class="text-[#1289AE]" href="https://booking.moh.gov.ge/">https://booking.moh.gov.ge/</a> '
  }
}
</script>
